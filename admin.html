<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Admin - Airbag & Radar Solutions</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<style>
  *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}
  body{background:#f4f4f4;color:#333}
  header{background:#0d1b2a;color:#fff;padding:20px;text-align:center}
  nav{display:flex;justify-content:center;gap:10px;background:#1b263b;padding:10px;flex-wrap:wrap}
  nav button{background:#415a77;color:#fff;border:none;padding:12px 24px;font-size:16px;cursor:pointer;border-radius:4px;transition:.3s}
  nav button:hover{background:#778da9}
  section{display:none;padding:20px;max-width:1200px;margin:auto;background:#fff;min-height:70vh}
  section.active{display:block}
  h2{margin-bottom:15px;color:#1b263b}
  .admin-only{background:#e7f3ff;border:2px dashed #2196F3;padding:15px;margin-bottom:20px;border-radius:6px}
  .stat-card{background:white;padding:20px;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,0.1);text-align:center}
  .stat-number{font-size:2em;color:#28a745;font-weight:bold;margin:10px 0}
  table{width:100%;border-collapse:collapse;margin-top:10px}
  th,td{border:1px solid #ccc;padding:8px;text-align:center}
  th{background:#f2f2f2}
  input[type=number],input[type=text],select,textarea{width:100%;padding:6px;margin:4px 0}
  button{padding:8px 12px;margin:4px;cursor:pointer}
  .progress-bar{width:100%;height:18px;background:#e0e0e0;border-radius:9px;overflow:hidden;margin-bottom:5px}
  .progress-bar div{height:100%;background:#28a745;width:0%;transition:width .3s;text-align:center;color:#fff;font-size:12px;line-height:18px}
  footer{text-align:center;padding:20px;background:#0d1b2a;color:#fff}
</style>
</head>
<body>

<!-- CAPA PIN -->
<div id="login" style="position:fixed;inset:0;background:#0d1b2a;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999">
  <h2>Acceso Administrativo</h2>
  <input id="pin" type="password" placeholder="PIN de 4 dígitos" maxlength="4" style="margin:10px;padding:8px;width:150px;text-align:center">
  <button onclick="verificarPin()">Entrar</button>
</div>

<!-- CONTENIDO ADMIN -->
<div id="panel" style="display:none">

<header>
  <h1>🔧 Admin - Airbag & Radar Solutions</h1>
  <p>Panel de control completo</p>
</header>

<nav>
  <button onclick="mostrar('dashboard')">Dashboard</button>
  <button onclick="mostrar('ordenes')">Órdenes</button>
  <button onclick="mostrar('tienda')">Tienda Admin</button>
  <button onclick="mostrar('inventario')">Inventario 300</button>
  <button onclick="mostrar('contacto')">Contacto</button>
</nav>

<!-- 1. DASHBOARD -->
<section id="dashboard" class="active">
  <h2>📊 Dashboard de Airbag & Radar Solutions</h2>
  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;">
    <div class="stat-card"><h3>Ordenes Mes</h3><p class="stat-number" id="ordenesMes">0</p></div>
    <div class="stat-card"><h3>Ingresos Mes</h3><p class="stat-number" id="ingresosMes">$0</p></div>
    <div class="stat-card"><h3>Productos Vendidos</h3><p class="stat-number" id="productosVendidos">0</p></div>
    <div class="stat-card"><h3>Clientes Nuevos</h3><p class="stat-number" id="clientesNuevos">0</p></div>
  </div>
</section>

<!-- 2. ÓRDENES -->
<section id="ordenes">
  <h2>🔧 Órdenes de Trabajo - Airbag & Radar Solutions</h2>
  <div class="admin-only">
    <h3>Nueva orden</h3>
    <input type="text" id="ordCliente" placeholder="Nombre cliente">
    <input type="text" id="ordAuto" placeholder="Marca / Modelo / Año">
    <select id="ordServicio">
      <option>Diagnóstico SRS</option>
      <option>Reparación módulo</option>
      <option>Calibración radar</option>
      <option>Venta de airbag</option>
    </select>
    <button onclick="nuevaOrden()">Crear orden</button>
  </div>
  <h3>Listado de órdenes</h3>
  <table id="tablaOrdenes">
    <thead><tr><th>#</th><th>Fecha</th><th>Cliente</th><th>Vehículo</th><th>Servicio</th><th>Estado</th><th>Acciones</th></tr></thead>
    <tbody></tbody>
  </table>
</section>

<!-- 3. TIENDA ADMIN -->
<section id="tienda">
  <h2>🛒 Tienda Admin - Airbag & Radar Solutions</h2>
  <div id="catalogoCliente"></div>
  <div id="carritoUI" class="admin-only">
    <h3>Carrito</h3>
    <div id="itemsCarrito"></div>
    <hr><strong>Total: $<span id="totalCarrito">0</span></strong><br>
    <button onclick="pagar()">Pagar (simulado)</button>
  </div>
</section>

<!-- 4. INVENTARIO 300 PRODUCTOS -->
<section id="inventario">
  <h2>📦 Inventario 300 Productos - Admin</h2>

  <!-- BOTÓN PARA GUARDAR CAMBIOS EN GITHUB -->
  <div class="admin-only" style="margin:20px 0;border:2px dashed #28a745;padding:15px">
    <h3>💾 Guardar cambios en GitHub</h3>
    <button onclick="guardarCambiosEnGitHub()">Subir CSV actualizado</button>
    <p id="resGitHub"></p>
  </div>

  <!-- CARGA MASIVA POR CSV -->
  <div class="admin-only" style="margin:20px 0;border:2px dashed #2196F3;padding:15px">
    <h3>1. Descargá la plantilla Excel (300 productos)</h3>
    <a href="data:text/csv;charset=utf-8,codigo_oem,nombre,marca,modelo,anio,precio,stock,imagen_url,descripcion%0AVOL-CIV-
